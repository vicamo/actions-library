name: 'Debian Releases'
description: 'Fetch debian releases info'
branding:
  icon: 'target'
  color: 'red'

outputs:
  json:
    description: >-
      A JSON-formatted string in following format:
        [
          {
            distribution: 'debian'
            suite: 'unstable'
            codename: 'sid'
            description: 'Debian x.y Unstable - Not Released'
            active: true
            release: '98'
            architectures: [ # merge from all pockets, 'all' will be removed.
              'amd64', ...
            ]
            components: [ # merge from all pockets
              'main', 'contrib', 'non-free-firmware', 'non-free'
            ]
            mirrors: [
              {
                name: 'default'
                url: 'https://deb.debian.org/debian'
                pockets: {
                  'sid': { # trixie, trixie-updates, etc.
                    architectures: [
                      'all', 'amd64', ...
                    ]
                    components: [
                      'main', 'contrib', 'non-free-firmware', 'non-free'
                    ]
                  }
                }
              },
              {
                name: 'ports'
                url: 'http://ftp.ports.debian.org/debian-ports'
                ...
              }
            ]
          }
        ]
    value: ${{ steps.release-info.outputs.json }}

runs:
  using: 'composite'
  steps:
    - id: release-info
      shell: bash
      env:
        RELEASE_INFO_JSON: >-
          [{"active":true,"architectures":["amd64","arm64","armel","armhf","i386","mips64el","ppc64el","riscv64","s390x"],"codename":"experimental","components":["contrib","main","non-free","non-free-firmware"],"description":"Experimental
          packages - not released; use at your own
          risk.","distribution":"debian","mirrors":[{"name":"default","pockets":{"experimental":{"architectures":["all","amd64","arm64","armel","armhf","i386","mips64el","ppc64el","riscv64","s390x"],"components":["main","contrib","non-free-firmware","non-free"]}},"url":"https://deb.debian.org/debian"}],"release":"","status":"Experimental","suite":""},{"active":true,"architectures":["alpha","amd64","arm64","armel","armhf","hppa","hurd-amd64","hurd-i386","i386","loong64","m68k","mips64el","powerpc","ppc64","ppc64el","riscv64","s390x","sh4","sparc64","x32"],"codename":"sid","components":["contrib","main","non-free","non-free-firmware"],"description":"Debian
          x.y Unstable - Not
          Released","distribution":"debian","mirrors":[{"name":"default","pockets":{"sid":{"architectures":["all","amd64","arm64","armel","armhf","i386","mips64el","ppc64el","riscv64","s390x"],"components":["main","contrib","non-free-firmware","non-free"]}},"url":"https://deb.debian.org/debian"},{"name":"ports","pockets":{"sid":{"architectures":["all","alpha","hppa","hurd-amd64","hurd-i386","loong64","m68k","powerpc","ppc64","sh4","sparc64","x32"],"components":["main","contrib","non-free","non-free-firmware"]}},"url":"http://ftp.ports.debian.org/debian-ports"}],"release":"","status":"Active
          Development","suite":"unstable"},{"active":true,"architectures":["amd64","arm64","armel","armhf","i386","mips64el","ppc64el","riscv64","s390x"],"codename":"trixie","components":["contrib","main","non-free","non-free-firmware"],"description":"Debian
          x.y Testing distribution - Not
          Released","distribution":"debian","mirrors":[{"name":"default","pockets":{"trixie":{"architectures":["all","amd64","arm64","armel","armhf","i386","mips64el","ppc64el","riscv64","s390x"],"components":["main","contrib","non-free-firmware","non-free"]},"trixie-backports":{"architectures":["all","amd64","arm64","armel","armhf","i386","mips64el","ppc64el","riscv64","s390x"],"components":["main","contrib","non-free-firmware","non-free"]},"trixie-proposed-updates":{"architectures":["all","amd64","arm64","armel","armhf","i386","mips64el","ppc64el","riscv64","s390x"],"components":["main","contrib","non-free-firmware","non-free"]},"trixie-updates":{"architectures":["all","amd64","arm64","armel","armhf","i386","mips64el","ppc64el","riscv64","s390x"],"components":["main","contrib","non-free-firmware","non-free"]}},"url":"https://deb.debian.org/debian"}],"release":"13","status":"Future","suite":"testing"},{"active":true,"architectures":["amd64","arm64","armel","armhf","i386","mips64el","mipsel","ppc64el","s390x"],"codename":"bookworm","components":["contrib","main","non-free","non-free-firmware"],"description":"Debian
          12.10 Released 15 March
          2025","distribution":"debian","mirrors":[{"name":"default","pockets":{"bookworm":{"architectures":["all","amd64","arm64","armel","armhf","i386","mips64el","mipsel","ppc64el","s390x"],"components":["main","contrib","non-free-firmware","non-free"]},"bookworm-backports":{"architectures":["all","amd64","arm64","armel","armhf","i386","mips64el","mipsel","ppc64el","s390x"],"components":["main","contrib","non-free-firmware","non-free"]},"bookworm-backports-sloppy":{"architectures":["all","amd64","arm64","armel","armhf","i386","mips64el","mipsel","ppc64el","s390x"],"components":["main","contrib","non-free-firmware","non-free"]},"bookworm-proposed-updates":{"architectures":["all","amd64","arm64","armel","armhf","i386","mips64el","mipsel","ppc64el","s390x"],"components":["main","contrib","non-free-firmware","non-free"]},"bookworm-updates":{"architectures":["all","amd64","arm64","armel","armhf","i386","mips64el","mipsel","ppc64el","s390x"],"components":["main","contrib","non-free-firmware","non-free"]}},"url":"https://deb.debian.org/debian"}],"release":"12","status":"Current
          Stable
          Release","suite":"stable"},{"active":true,"architectures":["amd64","arm64","armel","armhf","i386","mips64el","mipsel","ppc64el","s390x"],"codename":"bullseye","components":["contrib","main","non-free"],"description":"Debian
          11.11 Released 31 August
          2024","distribution":"debian","mirrors":[{"name":"default","pockets":{"bullseye":{"architectures":["all","amd64","arm64","armel","armhf","i386","mips64el","mipsel","ppc64el","s390x"],"components":["main","contrib","non-free"]},"bullseye-backports":{"architectures":["all","amd64","arm64","armel","armhf","i386","mips64el","mipsel","ppc64el","s390x"],"components":["main","contrib","non-free"]},"bullseye-backports-sloppy":{"architectures":["all","amd64","arm64","armel","armhf","i386","mips64el","mipsel","ppc64el","s390x"],"components":["main","contrib","non-free"]},"bullseye-proposed-updates":{"architectures":["all","amd64","arm64","armel","armhf","i386","mips64el","mipsel","ppc64el","s390x"],"components":["main","contrib","non-free"]},"bullseye-updates":{"architectures":["all","amd64","arm64","armel","armhf","i386","mips64el","mipsel","ppc64el","s390x"],"components":["main","contrib","non-free"]}},"url":"https://deb.debian.org/debian"}],"release":"11","status":"Supported","suite":"oldstable"},{"active":true,"architectures":["amd64","arm64","armel","armhf","i386","mips","mips64el","mipsel","ppc64el","s390x"],"codename":"buster","components":["contrib","main","non-free"],"description":"Debian
          10.13 Released 10 September
          2022","distribution":"debian","mirrors":[{"name":"default","pockets":{"buster":{"architectures":["amd64","arm64","armel","armhf","i386","mips","mips64el","mipsel","ppc64el","s390x"],"components":["main","contrib","non-free"]},"buster-proposed-updates":{"architectures":["amd64","arm64","armel","armhf","i386","mips","mips64el","mipsel","ppc64el","s390x"],"components":["main","contrib","non-free"]},"buster-updates":{"architectures":["amd64","arm64","armel","armhf","i386","mips","mips64el","mipsel","ppc64el","s390x"],"components":["main","contrib","non-free"]}},"url":"https://deb.debian.org/debian"}],"release":"10","status":"Supported","suite":"oldoldstable"},{"active":false,"architectures":["amd64","arm64","armel","armhf","i386","mips","mips64el","mipsel","ppc64el","s390x"],"codename":"stretch","components":["contrib","main","non-free"],"description":"Debian
          9.13 Released 18 July
          2020","distribution":"debian","mirrors":[{"name":"default","pockets":{"stretch":{"architectures":["amd64","arm64","armel","armhf","i386","mips","mips64el","mipsel","ppc64el","s390x"],"components":["main","contrib","non-free"]},"stretch-backports":{"architectures":["amd64","arm64","armel","armhf","i386","mips","mips64el","mipsel","ppc64el","s390x"],"components":["main","contrib","non-free"]},"stretch-backports-sloppy":{"architectures":["amd64","arm64","armel","armhf","i386","mips","mips64el","mipsel","ppc64el","s390x"],"components":["main","contrib","non-free"]},"stretch-proposed-updates":{"architectures":["amd64","arm64","armel","armhf","i386","mips","mips64el","mipsel","ppc64el","s390x"],"components":["main","contrib","non-free"]}},"url":"https://archive.debian.org/debian"}],"release":"9","status":"Obsolete","suite":""},{"active":false,"architectures":["amd64","arm64","armel","armhf","i386","kfreebsd-amd64","kfreebsd-i386","mips","mipsel","powerpc","ppc64el","s390x"],"codename":"jessie","components":["contrib","main","non-free"],"description":"Debian
          8.11 Released 23 June
          2018","distribution":"debian","mirrors":[{"name":"default","pockets":{"jessie":{"architectures":["amd64","arm64","armel","armhf","i386","mips","mipsel","powerpc","ppc64el","s390x"],"components":["main","contrib","non-free"]},"jessie-backports":{"architectures":["amd64","arm64","armel","armhf","i386","kfreebsd-amd64","kfreebsd-i386","mips","mipsel","powerpc","ppc64el","s390x"],"components":["main","contrib","non-free"]},"jessie-backports-sloppy":{"architectures":["amd64","arm64","armel","armhf","i386","mips","mipsel","powerpc","ppc64el","s390x"],"components":["main","contrib","non-free"]},"jessie-kfreebsd":{"architectures":["kfreebsd-amd64","kfreebsd-i386"],"components":["main","contrib","non-free"]}},"url":"https://archive.debian.org/debian"}],"release":"8","status":"Obsolete","suite":""},{"active":false,"architectures":["amd64","armel","armhf","i386","ia64","kfreebsd-amd64","kfreebsd-i386","mips","mipsel","powerpc","s390","s390x","sparc"],"codename":"wheezy","components":["contrib","main","non-free"],"description":"Debian
          7.11 Released 04 June
          2016","distribution":"debian","mirrors":[{"name":"default","pockets":{"wheezy":{"architectures":["amd64","armel","armhf","i386","ia64","kfreebsd-amd64","kfreebsd-i386","mips","mipsel","powerpc","s390","s390x","sparc"],"components":["main","contrib","non-free"]},"wheezy-backports":{"architectures":["amd64","armel","armhf","i386","ia64","kfreebsd-amd64","kfreebsd-i386","mips","mipsel","powerpc","s390","s390x","sparc"],"components":["main","contrib","non-free"]},"wheezy-backports-sloppy":{"architectures":["amd64","armel","armhf","i386","ia64","kfreebsd-amd64","kfreebsd-i386","mips","mipsel","powerpc","s390","s390x","sparc"],"components":["main","contrib","non-free"]}},"url":"https://archive.debian.org/debian"}],"release":"7","status":"Obsolete","suite":""},{"active":false,"architectures":["amd64","armel","i386","ia64","kfreebsd-amd64","kfreebsd-i386","mips","mipsel","powerpc","s390","sparc"],"codename":"squeeze","components":["contrib","main","non-free"],"description":"Debian
          6.0.10 Released 19 July
          2014","distribution":"debian","mirrors":[{"name":"default","pockets":{"squeeze":{"architectures":["amd64","armel","i386","ia64","kfreebsd-amd64","kfreebsd-i386","mips","mipsel","powerpc","s390","sparc"],"components":["main","contrib","non-free"]},"squeeze-lts":{"architectures":["amd64","i386"],"components":["main","contrib","non-free"]},"squeeze-proposed-updates":{"architectures":["amd64","armel","i386","ia64","kfreebsd-amd64","kfreebsd-i386","mips","mipsel","powerpc","s390","sparc"],"components":["main","contrib","non-free"]}},"url":"https://archive.debian.org/debian"}],"release":"6","status":"Obsolete","suite":""},{"active":false,"architectures":["alpha","amd64","arm","armel","hppa","i386","ia64","mips","mipsel","powerpc","s390","sparc"],"codename":"lenny","components":["contrib","main","non-free"],"description":"Debian
          5.0.10 Released 10 March
          2012","distribution":"debian","mirrors":[{"name":"default","pockets":{"lenny":{"architectures":["alpha","amd64","arm","armel","hppa","i386","ia64","mips","mipsel","powerpc","s390","sparc"],"components":["main","contrib","non-free"]}},"url":"https://archive.debian.org/debian"}],"release":"5","status":"Obsolete","suite":""},{"active":false,"architectures":["alpha","amd64","arm","hppa","i386","ia64","m68k","mips","mipsel","powerpc","s390","sparc"],"codename":"etch","components":["contrib","main","non-free"],"description":"Debian
          4.0r9 Released 22nd May
          2010","distribution":"debian","mirrors":[{"name":"default","pockets":{"etch":{"architectures":["alpha","amd64","arm","hppa","i386","ia64","mips","mipsel","powerpc","s390","sparc"],"components":["main","contrib","non-free"]},"etch-m68k":{"architectures":["m68k"],"components":["main","contrib","non-free"]}},"url":"https://archive.debian.org/debian"}],"release":"4","status":"Obsolete","suite":""},{"active":false,"architectures":["alpha","arm","hppa","i386","ia64","m68k","mips","mipsel","powerpc","s390","sparc"],"codename":"sarge","components":["contrib","main","non-free"],"description":"Debian
          3.1r8 Released 12th April
          2008","distribution":"debian","mirrors":[{"name":"default","pockets":{"sarge":{"architectures":["alpha","arm","hppa","i386","ia64","m68k","mips","mipsel","powerpc","s390","sparc"],"components":["main","contrib","non-free"]},"sarge-proposed-updates":{"architectures":["alpha","arm","hppa","i386","ia64","m68k","mips","mipsel","powerpc","s390","sparc"],"components":["main","contrib","non-free"]}},"url":"https://archive.debian.org/debian"}],"release":"3.1","status":"Obsolete","suite":""},{"active":false,"architectures":["alpha","arm","hppa","i386","ia64","m68k","mips","mipsel","powerpc","s390","sparc"],"codename":"woody","components":["contrib","main","non-free"],"description":"Debian
          3.0r6 Released 31 May
          2005","distribution":"debian","mirrors":[{"name":"default","pockets":{"woody":{"architectures":["alpha","arm","hppa","i386","ia64","m68k","mips","mipsel","powerpc","s390","sparc"],"components":["main","contrib","non-free"]}},"url":"https://archive.debian.org/debian"}],"release":"3","status":"Obsolete","suite":""},{"active":false,"architectures":["alpha","arm","i386","m68k","powerpc","sparc"],"codename":"potato","components":["contrib","main","non-free"],"description":"Debian
          2.2r7 Released 12th July
          2002","distribution":"debian","mirrors":[{"name":"default","pockets":{"potato":{"architectures":["alpha","arm","i386","m68k","powerpc","sparc"],"components":["main","contrib","non-free"]},"potato-proposed-updates":{"architectures":["alpha","arm","i386","m68k","powerpc","sparc"],"components":[]}},"url":"https://archive.debian.org/debian"}],"release":"2.2","status":"Obsolete","suite":""},{"active":false,"architectures":[],"codename":"slink","components":[],"description":"","distribution":"debian","mirrors":[{"name":"default","pockets":{"slink":{"architectures":[],"components":[]},"slink-proposed-updates":{"architectures":[],"components":[]}},"url":"https://archive.debian.org/debian"}],"release":"2.1","status":"Obsolete","suite":""},{"active":false,"architectures":[],"codename":"hamm","components":[],"description":"","distribution":"debian","mirrors":[{"name":"default","pockets":{"hamm":{"architectures":[],"components":[]},"hamm-proposed-updates":{"architectures":[],"components":[]}},"url":"https://archive.debian.org/debian"}],"release":"2","status":"Obsolete","suite":""}]

      run: echo "json=$(echo $RELEASE_INFO_JSON)" >> $GITHUB_OUTPUT
